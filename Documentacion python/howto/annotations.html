<!DOCTYPE html>

<html lang="es" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Prácticas recomendadas para las anotaciones" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://docs.python.org/3/howto/annotations.html" />
<meta property="og:site_name" content="Python documentation" />
<meta property="og:description" content="autor, Larry Hastings,. Resumen: Este documento se designó para encapsular las prácticas recomendadas para trabajar con diccionarios de anotaciones. Si escribe código Python que examina__annotation..." />
<meta property="og:image:width" content="1146" />
<meta property="og:image:height" content="600" />
<meta property="og:image" content="https://docs.python.org/3.15/es/_images/social_previews/summary_howto_annotations_d0905baf.png" />
<meta property="og:image:alt" content="autor, Larry Hastings,. Resumen: Este documento se designó para encapsular las prácticas recomendadas para trabajar con diccionarios de anotaciones. Si escribe código Python que examina__annotation..." />
<meta name="description" content="autor, Larry Hastings,. Resumen: Este documento se designó para encapsular las prácticas recomendadas para trabajar con diccionarios de anotaciones. Si escribe código Python que examina__annotation..." />
<meta name="twitter:card" content="summary_large_image" />
<meta name="theme-color" content="#3776ab">

    <title>Prácticas recomendadas para las anotaciones &#8212; documentación de Python - 3.15.0a0</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css?v=234b1a7c" />
    <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css?v=8cd84f99" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../_static/pygments_dark.css?v=5349f25f" />
    
    <script src="../_static/documentation_options.js?v=bf1f176d"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=f85f4cfb"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Buscar en documentación de Python - 3.15.0a0"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="Sobre este documento" href="../about.html" />
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="copyright" title="Derechos de autor" href="../copyright.html" />
    <link rel="next" title="Aislamiento de módulos de extensión" href="isolating-extensions.html" />
    <link rel="prev" title="Python support for the perf map compatible profilers" href="perf_profiling.html" />
    
      
      <script defer file-types="bz2,epub,zip" data-domain="docs.python.org" src="https://analytics.python.org/js/script.file-downloads.outbound-links.js"></script>
      
      <link rel="canonical" href="https://docs.python.org/3/howto/annotations.html">
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="stylesheet" href="../_static/pydoctheme_dark.css" media="(prefers-color-scheme: dark)" id="pydoctheme_dark_css">
    <link rel="shortcut icon" type="image/png" href="../_static/py.svg">
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script>
            <script type="text/javascript" src="../_static/search-focus.js"></script>
            <script type="text/javascript" src="../_static/themetoggle.js"></script> 
            <script type="text/javascript" src="../_static/rtd_switcher.js"></script>
            <meta name="readthedocs-addons-api-version" content="1">

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menú">
    <nav class="nav-content" role="navigation">
        <label for="menuToggler" class="toggler__label">
            <span></span>
        </label>
        <span class="nav-items-wrapper">
            <a href="https://www.python.org/" class="nav-logo">
                <img src="../_static/py.svg" alt="Python logo">
            </a>
            <span class="version_switcher_placeholder"></span>
            <form role="search" class="search" action="../search.html" method="get">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                    <path fill-rule="nonzero" fill="currentColor" d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                </svg>
                <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="search" name="q">
                <input type="submit" value="Ir">
            </form>
        </span>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
            
<label class="theme-selector-label">
    Tema
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Claro</option>
        <option value="dark">Oscuro</option>
    </select>
</label>
  <div>
    <h3><a href="../contents.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#">Prácticas recomendadas para las anotaciones</a><ul>
<li><a class="reference internal" href="#accessing-the-annotations-dict-of-an-object-in-python-3-10-and-newer">Acceder al diccionario de anotaciones de un objeto en las versiones de Python 3.10 y posteriores</a></li>
<li><a class="reference internal" href="#accessing-the-annotations-dict-of-an-object-in-python-3-9-and-older">Acceder al diccionario de anotaciones de un objeto en las versiones de Python 3.9 y anteriores</a></li>
<li><a class="reference internal" href="#manually-un-stringizing-stringized-annotations">Desencadenamiento manual de anotaciones en cadena</a></li>
<li><a class="reference internal" href="#best-practices-for-annotations-in-any-python-version">Prácticas recomendadas para <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> en cualquier versión de Python</a></li>
<li><a class="reference internal" href="#annotations-quirks">Peculiaridades de <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code></a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="perf_profiling.html"
                          title="capítulo anterior">Python support for the <code class="docutils literal notranslate"><span class="pre">perf</span> <span class="pre">map</span></code> compatible profilers</a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="isolating-extensions.html"
                          title="próximo capítulo">Aislamiento de módulos de extensión</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This page</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Report a bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/howto/annotations.rst?plain=1"
            rel="nofollow">Show source
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice general"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="isolating-extensions.html" title="Aislamiento de módulos de extensión"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="perf_profiling.html" title="Python support for the perf map compatible profilers"
             accesskey="P">anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="Python logo" style="vertical-align: middle; margin-top: -1px"></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.15.0a0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Comos (<em>HOWTOs</em>) de Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Prácticas recomendadas para las anotaciones</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="search" name="q" id="search-box">
          <input type="submit" value="Ir">
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Tema
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Claro</option>
        <option value="dark">Oscuro</option>
    </select>
</label> |</li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="annotations-best-practices">
<span id="annotations-howto"></span><h1 class="translated">Prácticas recomendadas para las anotaciones<a class="headerlink" href="#annotations-best-practices" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd translated">autor<span class="colon">:</span></dt>
<dd class="field-odd translated"><p class="translated">Larry Hastings</p>
</dd>
</dl>
<aside class="topic">
<p class="translated topic-title">Resumen</p>
<p class="translated">Este documento se designó para encapsular las prácticas recomendadas para trabajar con diccionarios de anotaciones. Si escribe código Python que examina <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> en objetos Python, recomendamos seguir las pautas que se describen a continuación.</p>
<p class="translated">El documento se organizó en 4 secciones: prácticas recomendadas para acceder a las anotaciones de un objeto en las versiones de Python 3.10 y posteriores, prácticas recomendadas para acceder a las anotaciones de un objeto en las versiones de Python 3.9 y anteriores, otras prácticas recomendadas para <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> que aplican a cualquier versión de Python y peculiaridades de <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code>.</p>
<p class="translated">Tome en cuenta que este documento trabaja específicamente con <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code>, no usarlo <em>para</em> anotaciones. Si está buscando información sobre cómo usar «anotaciones de tipado» en su código, consulte el módulo <a class="reference internal" href="../library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">typing</span></code></a>.</p>
</aside>
<section id="accessing-the-annotations-dict-of-an-object-in-python-3-10-and-newer">
<h2 class="translated">Acceder al diccionario de anotaciones de un objeto en las versiones de Python 3.10 y posteriores<a class="headerlink" href="#accessing-the-annotations-dict-of-an-object-in-python-3-10-and-newer" title="Link to this heading">¶</a></h2>
<p class="untranslated">Python 3.10 adds a new function to the standard library:
<a class="reference internal" href="../library/inspect.html#inspect.get_annotations" title="inspect.get_annotations"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.get_annotations()</span></code></a>.  In Python versions 3.10
through 3.13, calling this function is the best practice for
accessing the annotations dict of any object that supports
annotations.  This function can also «un-stringize»
stringized annotations for you.</p>
<p class="untranslated">In Python 3.14, there is a new <a class="reference internal" href="../library/annotationlib.html#module-annotationlib" title="annotationlib: Functionality for introspecting annotations"><code class="xref py py-mod docutils literal notranslate"><span class="pre">annotationlib</span></code></a> module
with functionality for working with annotations. This
includes a <a class="reference internal" href="../library/annotationlib.html#annotationlib.get_annotations" title="annotationlib.get_annotations"><code class="xref py py-func docutils literal notranslate"><span class="pre">annotationlib.get_annotations()</span></code></a> function,
which supersedes <a class="reference internal" href="../library/inspect.html#inspect.get_annotations" title="inspect.get_annotations"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.get_annotations()</span></code></a>.</p>
<p class="translated">Si por alguna razón <a class="reference internal" href="../library/inspect.html#inspect.get_annotations" title="inspect.get_annotations"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.get_annotations()</span></code></a> no es viable para su caso de uso, puede acceder manualmente al miembro de datos <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code>. La práctica recomendada para esto también cambió en Python 3.10: a partir de Python 3.10, se garantiza que <code class="docutils literal notranslate"><span class="pre">o.__annotations__</span></code> <em>siempre</em> opere en funciones, clases y módulos de Python. Si está seguro de que el objeto que está examinando es uno de los tres objetos <em>específicos</em>, puede usar simplemente <code class="docutils literal notranslate"><span class="pre">o.__annotations__</span></code> para obtener el diccionario de anotaciones del objeto.</p>
<p class="translated">Sin embargo, otros tipos de llamadas – por ejemplo, invocables creados por <a class="reference internal" href="../library/functools.html#functools.partial" title="functools.partial"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partial()</span></code></a> – pueden no tener definido un atributo <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code>. Al acceder a <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> de un objeto posiblemente desconocido, la práctica recomendada de las versiones de Python 3.10 y posteriores es llamar <a class="reference internal" href="../library/functions.html#getattr" title="getattr"><code class="xref py py-func docutils literal notranslate"><span class="pre">getattr()</span></code></a> con tres argumentos, por ejemplo <code class="docutils literal notranslate"><span class="pre">getattr(o,</span> <span class="pre">'__annotations__',</span> <span class="pre">None)</span></code>.</p>
<p class="translated">Antes de Python 3.10, acceder a <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> en una clase que no define anotaciones pero que tiene una clase padre con anotaciones devolvería las anotaciones de la clase padre. En Python 3.10 y versiones posteriores, las anotaciones de la clase hija serán un diccionario vacío en su lugar.</p>
</section>
<section id="accessing-the-annotations-dict-of-an-object-in-python-3-9-and-older">
<h2 class="translated">Acceder al diccionario de anotaciones de un objeto en las versiones de Python 3.9 y anteriores<a class="headerlink" href="#accessing-the-annotations-dict-of-an-object-in-python-3-9-and-older" title="Link to this heading">¶</a></h2>
<p class="translated">En versiones de Python 3.9 y anteriores, acceder al diccionario de anotaciones de un objeto es mucho más complicado que en versiones más recientes. El problema es un defecto de diseño en estas versiones anteriores de Python, específicamente relacionado con las anotaciones de clase.</p>
<p class="translated">La práctica recomendada para acceder al diccionario de anotaciones de otros objetos – funciones, otros invocables y módulos – es la misma que la de la 3.10, asumiendo que no está llamando <a class="reference internal" href="../library/inspect.html#inspect.get_annotations" title="inspect.get_annotations"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.get_annotations()</span></code></a>: debe usar tres argumentos de <a class="reference internal" href="../library/functions.html#getattr" title="getattr"><code class="xref py py-func docutils literal notranslate"><span class="pre">getattr()</span></code></a> para acceder al atributo <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> del objeto.</p>
<p class="translated">Desafortunadamente, esta no es la mejor práctica para las clases. El problema es que, dado que <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> es opcional en las clases, y debido a que las clases pueden heredar atributos desde sus clases base, acceder al atributo <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> de una clase puede retornar por inadvertencia el diccionario de anotaciones de una <em>clase base.</em> Como ejemplo:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Base</span><span class="p">:</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">b</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;abc&#39;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Derived</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nb">print</span><span class="p">(</span><span class="n">Derived</span><span class="o">.</span><span class="vm">__annotations__</span><span class="p">)</span>
</pre></div>
</div>
<p class="translated">Esto imprimirá el diccionario de anotaciones de <code class="docutils literal notranslate"><span class="pre">Base</span></code>, no de <code class="docutils literal notranslate"><span class="pre">Derived</span></code>.</p>
<p class="translated">Su código deberá tener una ruta de código separada si el objeto que está examinando es una clase (<code class="docutils literal notranslate"><span class="pre">isinstance(o,</span> <span class="pre">type)</span></code>). En este caso, la práctica recomendada se basa en un detalle de implementación de las versiones de Python 3.9 y anteriores: si una clase tiene anotaciones definidas, se almacenan en el diccionario <a class="reference internal" href="../reference/datamodel.html#type.__dict__" title="type.__dict__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__dict__</span></code></a> de la clase. Dado que la clase puede o no tener anotaciones definidas, la mejor práctica es llamar al método <a class="reference internal" href="../library/stdtypes.html#dict.get" title="dict.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a> en el diccionario de la clase.</p>
<p class="translated">Para ponerlo todo junto, aquí hay un código de muestra que accede de forma segura al atributo <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> en un objeto arbitrario en las versiones de Python 3.9 y anteriores:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
    <span class="n">ann</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;__annotations__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">ann</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="s1">&#39;__annotations__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p class="translated">Después de ejecutar este código, <code class="docutils literal notranslate"><span class="pre">ann</span></code> debería ser un diccionario o <code class="docutils literal notranslate"><span class="pre">None</span></code>. Recomendamos que vuelva a verificar el tipo de <code class="docutils literal notranslate"><span class="pre">ann</span></code> usando <a class="reference internal" href="../library/functions.html#isinstance" title="isinstance"><code class="xref py py-func docutils literal notranslate"><span class="pre">isinstance()</span></code></a> antes de un examen más detenido.</p>
<p class="translated">Tome en cuenta que algunos objetos de tipo exótico o con formato incorrecto pueden no tener un atributo <a class="reference internal" href="../reference/datamodel.html#type.__dict__" title="type.__dict__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__dict__</span></code></a> , así que para mayor seguridad, también puede usar <a class="reference internal" href="../library/functions.html#getattr" title="getattr"><code class="xref py py-func docutils literal notranslate"><span class="pre">getattr()</span></code></a> para acceder a  <code class="xref py py-attr docutils literal notranslate"><span class="pre">__dict__</span></code>.</p>
</section>
<section id="manually-un-stringizing-stringized-annotations">
<h2 class="translated">Desencadenamiento manual de anotaciones en cadena<a class="headerlink" href="#manually-un-stringizing-stringized-annotations" title="Link to this heading">¶</a></h2>
<p class="translated">En situaciones donde algunas anotaciones pueden estar «encadenadas», y desea evaluar esas cadenas de caracteres para producir los valores de Python que representan, lo mejor es llamar a <a class="reference internal" href="../library/inspect.html#inspect.get_annotations" title="inspect.get_annotations"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.get_annotations()</span></code></a> para que haga este trabajo por usted.</p>
<p class="translated">Si está usando la versión de Python 3.9 o anterior, o si por alguna razón no puede usar <a class="reference internal" href="../library/inspect.html#inspect.get_annotations" title="inspect.get_annotations"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.get_annotations()</span></code></a>, necesitará duplicar su lógica. Recomendamos que examine la implementación de <a class="reference internal" href="../library/inspect.html#inspect.get_annotations" title="inspect.get_annotations"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.get_annotations()</span></code></a> en la versión actual de Python y siga un enfoque similar.</p>
<p class="translated">En pocas palabras, si desea evaluar una anotación en cadena en un objeto arbitrario <code class="docutils literal notranslate"><span class="pre">o</span></code>:</p>
<ul class="simple">
<li><p class="translated">Si <code class="docutils literal notranslate"><span class="pre">o</span></code> es un módulo, use <code class="docutils literal notranslate"><span class="pre">o.__dict__</span></code> como <code class="docutils literal notranslate"><span class="pre">globals</span></code> cuando llame a <a class="reference internal" href="../library/functions.html#eval" title="eval"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval()</span></code></a>.</p></li>
<li><p class="translated">Si <code class="docutils literal notranslate"><span class="pre">o</span></code> es una clase, use <code class="docutils literal notranslate"><span class="pre">sys.modules[o.__module__].__dict__</span></code> como <code class="docutils literal notranslate"><span class="pre">globals</span></code> y <code class="docutils literal notranslate"><span class="pre">dict(vars(o))</span></code> como <code class="docutils literal notranslate"><span class="pre">locals</span></code> cuando llame a <a class="reference internal" href="../library/functions.html#eval" title="eval"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval()</span></code></a>.</p></li>
<li><p class="translated">Si <code class="docutils literal notranslate"><span class="pre">o</span></code> es un invocable envuelto usando <a class="reference internal" href="../library/functools.html#functools.update_wrapper" title="functools.update_wrapper"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.update_wrapper()</span></code></a>, <a class="reference internal" href="../library/functools.html#functools.wraps" title="functools.wraps"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.wraps()</span></code></a> o <a class="reference internal" href="../library/functools.html#functools.partial" title="functools.partial"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partial()</span></code></a>, lo desenvuelve iterativamente accediendo a <code class="docutils literal notranslate"><span class="pre">o.__wrapped__</span></code> o <code class="docutils literal notranslate"><span class="pre">o.func</span></code> según corresponda, hasta que haya encontrado la función raíz sin envolver.</p></li>
<li><p class="translated">Si <code class="docutils literal notranslate"><span class="pre">o</span></code> es un invocable (pero no una clase), use <a class="reference internal" href="../reference/datamodel.html#function.__globals__" title="function.__globals__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">o.__globals__</span></code></a> como globales cuando llame a <a class="reference internal" href="../library/functions.html#eval" title="eval"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval()</span></code></a>.</p></li>
</ul>
<p class="translated">Sin embargo, no todos los valores de cadena de caracteres usados como anotaciones se pueden convertir correctamente en valores de Python mediante <a class="reference internal" href="../library/functions.html#eval" title="eval"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval()</span></code></a>. Los valores de cadena de caracteres pueden contener, teóricamente, cualquier cadena de caracteres válida, y en la práctica, hay varios casos de uso válidos para anotaciones de tipo que requieren anotaciones con valores de cadena de caracteres que <em>no pueden</em> evaluarse específicamente. Por ejemplo:</p>
<ul class="simple">
<li><p class="translated"><span class="target" id="index-3"></span><a class="pep reference external" href="https://peps.python.org/pep-0604/"><strong>PEP 604</strong></a> introduce tipos de unión usando <code class="docutils literal notranslate"><span class="pre">|</span></code>, antes de que se agregara soporte para esto en Python 3.10.</p></li>
<li><p class="translated">Las definiciones que no son necesarias en tiempo de ejecución, sólo se importan cuando <a class="reference internal" href="../library/typing.html#typing.TYPE_CHECKING" title="typing.TYPE_CHECKING"><code class="xref py py-const docutils literal notranslate"><span class="pre">typing.TYPE_CHECKING</span></code></a> es verdadero.</p></li>
</ul>
<p class="translated">Si <a class="reference internal" href="../library/functions.html#eval" title="eval"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval()</span></code></a> intenta evaluar tales valores, fallará y lanzará una excepción. Por lo tanto, al diseñar una API de biblioteca que funcione con anotaciones, se recomienda sólo intentar evaluar valores de cadena de caracteres cuando la llamada lo solicite explícitamente.</p>
</section>
<section id="best-practices-for-annotations-in-any-python-version">
<h2 class="translated">Prácticas recomendadas para <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> en cualquier versión de Python<a class="headerlink" href="#best-practices-for-annotations-in-any-python-version" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p class="translated">Debe evitar asignar directamente al miembro <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> de objetos. Deje que Python administre la configuración <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code>.</p></li>
<li><p class="translated">Si asigna directamente al miembro <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> de un objeto, siempre debe establecerlo en un objeto <code class="docutils literal notranslate"><span class="pre">dict</span></code>.</p></li>
<li><p class="untranslated">You should avoid accessing <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> directly on any object.
Instead, use <a class="reference internal" href="../library/annotationlib.html#annotationlib.get_annotations" title="annotationlib.get_annotations"><code class="xref py py-func docutils literal notranslate"><span class="pre">annotationlib.get_annotations()</span></code></a> (Python 3.14+)
or <a class="reference internal" href="../library/inspect.html#inspect.get_annotations" title="inspect.get_annotations"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.get_annotations()</span></code></a> (Python 3.10+).</p></li>
<li><p class="untranslated">If you do directly access the <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> member
of an object, you should ensure that it’s a
dictionary before attempting to examine its contents.</p></li>
<li><p class="translated">Debe evitar modificar los diccionarios <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code>.</p></li>
<li><p class="translated">Debe evitar eliminar el atributo <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> de un objeto.</p></li>
</ul>
</section>
<section id="annotations-quirks">
<h2 class="translated">Peculiaridades de <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code><a class="headerlink" href="#annotations-quirks" title="Link to this heading">¶</a></h2>
<p class="translated">En todas las versiones de Python 3, los objetos de función crean de forma diferida un diccionario de anotaciones si no hay anotaciones definidas en ese objeto. Puede eliminar el atributo <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> usando <code class="docutils literal notranslate"><span class="pre">del</span> <span class="pre">fn.__annotations__</span></code>, pero si luego accede a <code class="docutils literal notranslate"><span class="pre">fn.__annotations__</span></code>, el objeto creará un diccionario nuevo vacío que almacenará y retornará como sus anotaciones. Eliminar las anotaciones en una función antes de que haya creado su diccionario de anotaciones de forma diferida arrojará un <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>; el uso de dos veces seguidas de <code class="docutils literal notranslate"><span class="pre">del</span> <span class="pre">fn.__annotations__</span></code> garantiza que siempre arroje un <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>.</p>
<p class="translated">Todo en el párrafo anterior también se aplica a los objetos de clase y módulo en las versiones de Python 3.10 y posteriores.</p>
<p class="translated">En todas las versiones de Python 3, puede establecer <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> en un objeto de función en <code class="docutils literal notranslate"><span class="pre">None</span></code>. Sin embargo, al acceder después a las anotaciones en ese objeto usando <code class="docutils literal notranslate"><span class="pre">fn.__annotations__</span></code> se creará un diccionario vacío de forma diferida según el primer párrafo de esta sección. Esto <em>no</em> es cierto para módulos y clases, en cualquier versión de Python; esos objetos permiten establecer <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> en cualquier valor de Python, y conservarán cualquier valor que se establezca.</p>
<p class="translated">Si Python encadena sus anotaciones por usted (usando <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">annotations</span></code>), y especifica una cadena de caracteres como una anotación, la cadena de caracteres en sí se citará. En efecto, la anotación se cita <em>dos veces.</em> Por ejemplo:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>
<span class="k">def</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="s2">&quot;str&quot;</span><span class="p">):</span> <span class="k">pass</span>

<span class="nb">print</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="vm">__annotations__</span><span class="p">)</span>
</pre></div>
</div>
<p class="translated">Esto imprime <code class="docutils literal notranslate"><span class="pre">{'a':</span> <span class="pre">&quot;'str'&quot;}</span></code>. En realidad, esto no debería considerarse una «peculiaridad»; aquí se menciona simplemente porque podría sorprenderle.</p>
<p class="untranslated">If you use a class with a custom metaclass and access <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code>
on the class, you may observe unexpected behavior; see
<span class="target" id="index-1"></span><a class="pep reference external" href="https://peps.python.org/pep-0749/#pep749-metaclasses"><strong>749</strong></a> for some examples. You can avoid these
quirks by using <a class="reference internal" href="../library/annotationlib.html#annotationlib.get_annotations" title="annotationlib.get_annotations"><code class="xref py py-func docutils literal notranslate"><span class="pre">annotationlib.get_annotations()</span></code></a> on Python 3.14+ or
<a class="reference internal" href="../library/inspect.html#inspect.get_annotations" title="inspect.get_annotations"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.get_annotations()</span></code></a> on Python 3.10+. On earlier versions of
Python, you can avoid these bugs by accessing the annotations from the
class’s <a class="reference internal" href="../reference/datamodel.html#type.__dict__" title="type.__dict__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__dict__</span></code></a>
(for example, <code class="docutils literal notranslate"><span class="pre">cls.__dict__.get('__annotations__',</span> <span class="pre">None)</span></code>).</p>
<p class="untranslated">In some versions of Python, instances of classes may have an <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code>
attribute. However, this is not supported functionality. If you need the
annotations of an instance, you can use <a class="reference internal" href="../library/functions.html#type" title="type"><code class="xref py py-func docutils literal notranslate"><span class="pre">type()</span></code></a> to access its class
(for example, <code class="docutils literal notranslate"><span class="pre">annotationlib.get_annotations(type(myinstance))</span></code> on Python 3.14+).</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#">Prácticas recomendadas para las anotaciones</a><ul>
<li><a class="reference internal" href="#accessing-the-annotations-dict-of-an-object-in-python-3-10-and-newer">Acceder al diccionario de anotaciones de un objeto en las versiones de Python 3.10 y posteriores</a></li>
<li><a class="reference internal" href="#accessing-the-annotations-dict-of-an-object-in-python-3-9-and-older">Acceder al diccionario de anotaciones de un objeto en las versiones de Python 3.9 y anteriores</a></li>
<li><a class="reference internal" href="#manually-un-stringizing-stringized-annotations">Desencadenamiento manual de anotaciones en cadena</a></li>
<li><a class="reference internal" href="#best-practices-for-annotations-in-any-python-version">Prácticas recomendadas para <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> en cualquier versión de Python</a></li>
<li><a class="reference internal" href="#annotations-quirks">Peculiaridades de <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code></a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="perf_profiling.html"
                          title="capítulo anterior">Python support for the <code class="docutils literal notranslate"><span class="pre">perf</span> <span class="pre">map</span></code> compatible profilers</a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="isolating-extensions.html"
                          title="próximo capítulo">Aislamiento de módulos de extensión</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This page</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Report a bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/howto/annotations.rst?plain=1"
            rel="nofollow">Show source
        </a>
      </li>
    </ul>
  </div>
        </div>
<div id="sidebarbutton" title="Contraer barra lateral">
<span>«</span>
</div>

      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice general"
             >índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="isolating-extensions.html" title="Aislamiento de módulos de extensión"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="perf_profiling.html" title="Python support for the perf map compatible profilers"
             >anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="Python logo" style="vertical-align: middle; margin-top: -1px"></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.15.0a0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Comos (<em>HOWTOs</em>) de Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Prácticas recomendadas para las anotaciones</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="search" name="q" id="search-box">
          <input type="submit" value="Ir">
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Tema
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Claro</option>
        <option value="dark">Oscuro</option>
    </select>
</label> |</li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Derechos de autor</a> 2001 Python Software Foundation.
    <br>
    Ésta página tiene la licencia Python Software Foundation Versión 2.
    <br>
    Ejemplos, guías, y otro código en la documentación están bajo la licencia adicional Zero Clause BSD.
    <br>
    
      Ver <a href="/license.html">Historia y Licencia</a> para más información.<br>
    
    
    <br>

    La Python Software Foundation es una corporación sin fines de lucro.
<a href="https://www.python.org/psf/donations/">Por favor dona.</a>
<br>
    <br>
      Última actualización en oct 06, 2025 (04:51 UTC).
    
      <a href="/bugs.html">Encontraste un bug</a>?
    
    <br>

    Creado usando <a href="https://www.sphinx-doc.org/">Sphinx</a>8.2.3.
    </div>

  </body>
</html>